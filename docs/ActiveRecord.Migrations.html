<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>ActiveJS Reference: ActiveRecord.Migrations</title>
      <meta http-equiv="cache-control" content="no-cache">
      <link rel="stylesheet" href="shared.css" type="text/css"><script src="jquery.js" type="text/javascript"></script><script src="api.js" type="text/javascript"></script></head>
   <body><img src="aptana.gif" hspace="21" vspace="3"><h1>ActiveRecord.Migrations : <a href="Object.html">Object</a><div style="font-weight:normal;font-size:70%">Return to: <a href="ActiveJS.index.html">ActiveJS index</a></div>
      </h1>
      <div class="content">
         <div class="classDescription"></div>
         <h2>Classes</h2>
         <p>
            <table cellspacing="2" width="90%">
               <tr class="item">
                  <td class="declaration" style="font-size: 0.8em"><a href="ActiveRecord.Migrations.Schema.html">
                        <div>ActiveRecord.Migrations.Schema</div></a></td>
               </tr>
            </table>
         </p><a name="ActiveRecord.Migrations.Functions"></a><h2>Functions</h2>
         <table cellspacing="2" width="90%">
            <tr class="compheader" visibility="">
               <th style="text-align:left">Method</th>
               <th>Action</th>
            </tr>
            <tr class="item ">
               <td class="declaration">
                  <div class="name"><a name="ActiveRecord.Migrations.current"></a>static <a href="javascript:void(0);" onclick="toggleClickDetails(this)">current</a>() : <i>Number</i></div>
                  <div class="description">Returns the current schema version number.</div>
               </td>
               <td class="show-details"><a href="javascript:void(0);" onclick="toggleRowDetails(this)" style="color:#FFFFFF;">Show Details</a></td>
            </tr>
            <tr class="details-method">
               <td valign="top" colspan="2">
                  <p class="padded"><b>Returns</b><table cellspacing="1" width="90%" class="parameter-table">
                        <tr>
                           <td width="20%"><i>Number</i></td>
                           <td width="80%"></td>
                        </tr>
                     </table>
                  </p>
                  <dl class="details"></dl>
               </td>
            </tr>
            <tr class="item ">
               <td class="declaration">
                  <div class="name"><a name="ActiveRecord.Migrations.max"></a>static <a href="javascript:void(0);" onclick="toggleClickDetails(this)">max</a>() : <i>Number</i></div>
                  <div class="description">Returns the highest key name in the ActiveRecord.Migrations hash.</div>
               </td>
               <td class="show-details"><a href="javascript:void(0);" onclick="toggleRowDetails(this)" style="color:#FFFFFF;">Show Details</a></td>
            </tr>
            <tr class="details-method">
               <td valign="top" colspan="2">
                  <p class="padded"><b>Returns</b><table cellspacing="1" width="90%" class="parameter-table">
                        <tr>
                           <td width="20%"><i>Number</i></td>
                           <td width="80%"></td>
                        </tr>
                     </table>
                  </p>
                  <dl class="details"></dl>
               </td>
            </tr>
            <tr class="item ">
               <td class="declaration">
                  <div class="name"><a name="ActiveRecord.Migrations.migrate"></a>static <a href="javascript:void(0);" onclick="toggleClickDetails(this)">migrate</a>(<i>Number</i>&nbsp;target) : <i>
                        			void
                        		</i></div>
                  <div class="description">Migrates a database schema to the given version.</div>
               </td>
               <td class="show-details"><a href="javascript:void(0);" onclick="toggleRowDetails(this)" style="color:#FFFFFF;">Show Details</a></td>
            </tr>
            <tr class="details-method">
               <td valign="top" colspan="2">
                  <p class="padded"><b>Parameters</b><table cellspacing="1" width="90%" class="parameter-table">
                        <tr>
                           <td width="10%"><i>Number</i></td>
                           <td width="10%"><b>target</b></td>
                           <td width="80%"></td>
                        </tr>
                     </table>
                  </p>
                  <dl class="details"></dl>
               </td>
            </tr>
         </table><a name="ActiveRecord.Migrations.Examples"></a><h2>Examples</h2>
         <p>Migrations
            ----------
            
            Migrations are a method of versioining the database schema used by your
            application. All of your migrations must be defined in an object assigned
            to ActiveRecord.Migrations.migrations. The keys need not be numerically
            sequential, but must be numeric (i.e. 1,2,3 or 100,200,300).
            
            Each migration object must have an up() and down() method which will
            recieve an ActiveRecord.Migrations.Schema object. createTable() and
            addColumn() both use the same syntax as define() to specify default
            values and field types.
            
            ActiveRecord.Migrations.migrations = {
            1: {
            up: function(schema){
            schema.createTable('one',{
            a: '',
            b: {
            type: 'TEXT',
            value: 'default'
            }
            });
            },
            down: function(schema){
            schema.dropTable('one');
            }
            },
            2: {
            up: function(schema){
            schema.addColumn('one','c');
            },
            down: function(schema){
            schema.dropColumn('one','c');
            }
            }
            };
            
            ActiveRecord.Migrations.migrate(); //will migrate to the highest available (2 in this case)
            ActiveRecord.Migrations.migrate(0); //migrates down below 1, effectively erasing the schema
            ActiveRecord.Migrations.migrate(1); //migrates to version 1
         </p>
      </div>
      <div style="visibility:hidden;display:none"> aptana_docs</div>
   </body>
</html>